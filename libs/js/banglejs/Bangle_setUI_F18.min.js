(function(b,c){var a={};"object"==typeof b&&(a=b,b=a.mode);var e=!0;global.WIDGETS&&WIDGETS.back&&(e=!1,WIDGETS.back.remove(b&&a.back));Bangle.btnWatches&&(Bangle.btnWatches.forEach(clearWatch),delete Bangle.btnWatches);Bangle.swipeHandler&&(Bangle.removeListener("swipe",Bangle.swipeHandler),delete Bangle.swipeHandler);Bangle.touchHandler&&(Bangle.removeListener("touch",Bangle.touchHandler),delete Bangle.touchHandler);Bangle.uiRemove&&(Bangle.uiRemove(),delete Bangle.uiRemove);
if(b){if("updown"==b)Bangle.btnWatches=[setWatch(function(){c(-1)},BTN1,{repeat:1,edge:"falling"}),setWatch(function(){c(1)},BTN3,{repeat:1,edge:"falling"}),setWatch(function(){c()},BTN2,{repeat:1,edge:"falling"})];else if("leftright"==b)Bangle.btnWatches=[setWatch(function(){c(-1)},BTN1,{repeat:1,edge:"falling"}),setWatch(function(){c(1)},BTN3,{repeat:1,edge:"falling"}),setWatch(function(){c()},BTN2,{repeat:1,edge:"falling"})],Bangle.swipeHandler=d=>{c(d)},Bangle.on("swipe",Bangle.swipeHandler),
Bangle.touchHandler=d=>{c()},Bangle.on("touch",Bangle.touchHandler);else if("clock"==b)Bangle.CLOCK=1,Bangle.btnWatches=[setWatch(Bangle.showLauncher,BTN2,{repeat:1,edge:"falling"})];else if("clockupdown"==b)Bangle.CLOCK=1,Bangle.btnWatches=[setWatch(function(){c(-1)},BTN1,{repeat:1,edge:"falling"}),setWatch(function(){c(1)},BTN3,{repeat:1,edge:"falling"}),setWatch(Bangle.showLauncher,BTN2,{repeat:1,edge:"falling"})];else if("custom"==b)a.clock&&(Bangle.CLOCK=1),a.touch&&(Bangle.touchHandler=a.touch,
Bangle.on("touch",Bangle.touchHandler)),a.swipe&&(Bangle.swipeHandler=a.swipe,Bangle.on("swipe",Bangle.swipeHandler)),a.btn?Bangle.btnWatches=[setWatch(function(){a.btn(1)},BTN1,{repeat:1,edge:"falling"}),setWatch(function(){a.btn(2)},BTN2,{repeat:1,edge:"falling"}),setWatch(function(){a.btn(3)},BTN3,{repeat:1,edge:"falling"})]:a.clock&&(Bangle.btnWatches=[setWatch(Bangle.showLauncher,BTN2,{repeat:1,edge:"falling"})]);else throw Error("Unknown UI mode");a.remove&&(Bangle.uiRemove=a.remove);if(a.back){var f=
d=>{1==d&&a.back()};Bangle.on("touch",f);WIDGETS=Object.assign({back:{area:"tl",width:24,draw:d=>g.reset().setColor("#f00").drawImage(atob("GBiBAAAYAAH/gAf/4A//8B//+D///D///H/P/n+H/n8P/n4f/vwAP/wAP34f/n8P/n+H/n/P/j///D///B//+A//8Af/4AH/gAAYAA=="),d.x,d.y),remove:d=>{Bangle.removeListener("touch",f);d||g.reset().clearRect({x:WIDGETS.back.x,y:WIDGETS.back.y,w:24,h:24});delete WIDGETS.back;d||Bangle.drawWidgets()}}},global.WIDGETS);e&&Bangle.drawWidgets()}}})