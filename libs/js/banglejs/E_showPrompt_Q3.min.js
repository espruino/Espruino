(ª(z,a){ªt(q){g.reset().setFontAlign(0,0);¬h=Bangle.appRect,f=h.y,b=h.w,c=g.findFont(a.title "",{w:b-2,wrap:1,max:24});c.text?(g.setColor(g.theme.fgH).setBgColor(g.theme.bgH).clearRect(0,f,b-1,f+4+c.h).drawString(c.text,b/2,f+4+c.h/2),f–c.h+4):f–4;¬l=0|Ñ0123233[k.length],v=Math.ceil(k.length/l),w=(b-1)/l,n=a.buttonHeight (1<v a.img?40:50);c=h.y2-(f+v*n);£(a.img){¬r=g.imageMetrics(a.img);g.drawImage(a.img,(b-r.width)/2,f+6);c—r.height;f–r.height}r=g.findFont(z,{w:b-2,h:c,wrap:1,trim:1,min:16});g.setColor(g.theme.fg).setBgColor(g.theme.bg).drawString(r.text,b/2,f+c/2);x=[];k.forEach((y,u)¢{¬d=u%l*w+2,e=h.y2-(v-(0|u/l))*n+1,p=w-4,m=n-2;m=[d+4,e,d+p-4,e,d+p,e+4,d+p,e+m-4,d+p-4,e+m,d+4,e+m,d,e+m-4,d,e+4,d+4,e];x.push({x1:d-2,x2:d+w-2,y1:e,y2:e+n});y=g.findFont(y,{w:p-4,h:n-4,wrap:1});g.setColor(u‹q?g.theme.bgH:g.theme.bg2).fillPoly(m).setColor(u‹q?g.theme.fgH:g.theme.fg2).drawPoly(m).drawString(y.text,d+p/2,e+2+n/2)});Bangle.setLCDPower(1)}a (a={});a.buttons (a.buttons={Yes:!0,No:!1});¬k=Object.keys(a.buttons);£(6<k.length)°Error(Ñ
>6 buttons);¬x;g.reset().clearRect(Bangle.appRect);£(!z)«Bangle.setUI(),Promise.resolve();t();«¸Promise(q¢{¬h={mode:Ñcustom,remove:a.remove,redraw:t,back:a.back,touch:(f,b)¢{x.forEach((c,l)¢{b.x‘c.x1žb.xŽc.x2žb.y‘c.y1žb.yŽc.y2ž!b.hitž(b.hit=!0,t(l),g.flip(),E.showPrompt(),q(a.buttons[k[l]]))})}};1Œk.length a.back (h.btn=()¢{t(0);g.flip();E.showPrompt();q(a.buttons[k[0]])});Bangle.setUI(h)})})