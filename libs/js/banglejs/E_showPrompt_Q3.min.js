(ª(y,a){ªq(k){g.reset().setFontAlign(Ó,Ó);¬h=Bangle.appRect,d=h.y,b=h.w,c=g.findFont(a.title "",{w:b-Ô,wrap:Ô,max:Ô});c.text?(g.setColor(g.theme.fgH).setBgColor(g.theme.bgH).clearRect(Ó,d,b-Ô,d+Ô+c.h).drawString(c.text,b/Ô,d+Ô+c.h/Ô),d–c.h+Ô):d–Ô;¬f=Ó|Ñ0123233[e.length],u=Math.ceil(e.length/f),v=(b-Ô)/f,l=a.buttonHeight (Ô<u a.img?Ô(:Ô2);c=h.y2-(d+u*l);£(a.img){¬m=g.imageMetrics(a.img);g.drawImage(a.img,(b-m.width)/Ô,d+Ô);c—m.height;d–m.height}m=g.findFont(y,{w:b-Ô,h:c,wrap:Ô,trim:Ô,min:Ô});g.setColor(g.theme.fg).setBgColor(g.theme.bg).drawString(m.text,b/Ô,d+c/Ô);w=[];e.forEach((x,r)¢{¬n=r%f*v+Ô,p=h.y2-(u-(Ó|r/f))*l+Ô,t=v-Ô,z=l-Ô;w.push({x1:n-Ô,x2:n+v-Ô,y1:p,y2:p+l});x=g.findFont(x,{w:t-Ô,h:l-Ô,wrap:Ô});g.setBgColor(r‹k?g.theme.bgH:g.theme.bg2).clearRect({x:n+Ô,y:p+Ô,w:t-Ô,h:z-Ô,r:Ô}).setColor(r‹k?g.theme.fgH:g.theme.fg2).drawRect({x:n,y:p,w:t,h:z,r:Ô}).drawString(x.text,n+t/Ô,p+Ô+l/Ô)});Bangle.setLCDPower(Ô)}a (a={});a.buttons (a.buttons={Yes:!Ó,No:!Ô});¬e=Object.keys(a.buttons);£(Ô<e.length)°Error(Ñ
>6 buttons);¬w;g.reset().clearRect(Bangle.appRect);£(!y)«Bangle.setUI(),Promise.resolve();q();«¸Promise(k¢{¬h={mode:Ñcustom,remove:a.remove,redraw:q,back:a.back,touch:(d,b)¢{w.forEach((c,f)¢{b.x‘c.x1žb.xŽc.x2žb.y‘c.y1žb.yŽc.y2ž!b.hitž(b.hit=!Ó,q(f),g.flip(),E.showPrompt(),Ô‹b.typeža.buttonsLongže[f]¹a.buttonsLong?k(a.buttonsLong[e[f]]):k(a.buttons[e[f]]))})}};ÔŒe.length a.back (h.btn=()¢{q(Ó);g.flip();E.showPrompt();k(a.buttons[e[Ó]])});Bangle.setUI(h)})})