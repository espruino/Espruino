var h=D2,k=D3,l=D4,m=D5,d=D6,n=D7,p=D9,q=D10,r=D11,t=D13,f=D15,u=D16,g=D17,v=D18,w=D19,x=D26,y=D22,z=D23,A=D25;exports.setEnvOn=function(a,c){this.BME280&&this.BME280.setPower(!1);delete this.BME280;if(a){var b=new SPI;b.setup({miso:m,mosi:k,sck:l});c&&setTimeout(c,100,this.BME280);return this.BME280=require("BME280").connectSPI(b,h)}};exports.setMagOn=function(a,c){this.LIS2MDL&&this.LIS2MDL.off();delete this.LIS2MDL;if(a){var b=new I2C;b.setup({sda:t,scl:r});c&&setTimeout(c,100,this.LIS2MDL);
return this.LIS2MDL=require("LIS2MDL").connectI2C(b,{"int":u})}};exports.setAccelOn=function(a,c){this.LIS3DH&&this.LIS3DH.off();delete this.LIS3DH;if(a){var b=new I2C;b.setup({sda:w,scl:v});c&&setTimeout(c,100,this.LIS3DH);return this.LIS3DH=require("LIS3DH").connectI2C(b,{"int":A})}};exports.setOptoOn=function(a,c){this.OPT3001&&this.OPT3001.off();delete this.OPT3001;if(a){var b=new I2C;b.setup({sda:x,scl:z,bitrate:4E5});c&&setTimeout(c,1E3,this.OPT3001);return this.OPT3001=require("OPT3001").connectI2C(b,
{"int":y})}};exports.setCellOn=function(a,c){if(a)if(this.cellOn)setTimeout(c,10,Serial1);else return(new Promise(function(b){Serial1.removeAllListeners();Serial1.on("data",function(b){});Serial1.setup(115200,{tx:p,rx:n,cts:q});d.reset();setTimeout(b,200)})).then(function(){d.set();return new Promise(function(b){setTimeout(b,200)})}).then(function(){f.set();return new Promise(function(b){setTimeout(b,2E3)})}).then(function(){f.reset();return new Promise(function(b){setTimeout(b,5E3)})}).then(function(){this.cellOn=
!0;Serial1.removeAllListeners();c&&setTimeout(c,10,Serial1)});else this.cellOn=!1,d.reset(),c&&setTimeout(c,1E3)};exports.setCharging=function(a){g.write(!a)};exports.setCharging=function(a){g.write(!a)};exports.setGPSOn=function(a,c){a?this.setCellOn(a,function(b){var a=require("AT").connect(b),d={at:a,on:function(b){b=b||function(){};a.cmd("AT+QGPS=1\r\n",1E3,function e(a){if(a.startsWith("AT+"))return e;b("OK"==a?null:a)})},off:function(b){b=b||function(){};a.cmd("AT+QGPSEND\r\n",1E3,function e(a){if(a.startsWith("AT+"))return e;
b("OK"==a?null:a)})},get:function(b){b=b||function(){};a.cmd("AT+QGPSLOC=2\r\n",1E3,function e(a){if(a.startsWith("AT+"))return e;if(a.startsWith("+CME ERROR:"))b({error:a.substr(5)});else if(a.startsWith("+QGPSLOC:")){a=a.substr(9).trim();var c=a.split(",");b({raw:a,UTC:c[0],lat:+c[1],lon:+c[2],alt:+c[4]})}else b({error:a})})}};d.on(function(a){c(a,a?void 0:d)})}):this.setCellOn(!1,c)}